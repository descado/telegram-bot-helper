# Домашнее задание по теме "Observability (o11y)"

## Описание проекта

Данный проект представляет собой полноценный o11y-стек

Сервис предоставляет API, куда любой Telegram-бот может отправлять информацию о полученных сообщениях. Эта информация сохраняется в базе данных и может быть в дальнейшем использована для анализа.

В целом проект максимально простой. Самое то для для мониторинга.

---
## Важные ссылки

*   **Ссылка на GitHub с проектом:** https://github.com/descado/telegram-bot-helper

*   **Ссылка на документацию:** [http://51.250.78.138:8080/docs](http://51.250.78.138:8080/docs)

*   **Дашборд Grafana:** [http://51.250.78.138:3000/](http://51.250.78.138:3000/)
    *   **Логин:** `admin`
    *   **Пароль:** `admin`

*   **UI для нагрузочного тестирования (Locust):** [http://51.250.78.138:8089/](http://51.250.78.138:8089/)

*   **UI для просмотра трейсов (Jaeger):** [http://51.250.78.138:16686/](http://51.250.78.138:16686/)

*   **Интерактивная документация по API (Swagger):** [http://51.250.78.138:8080/swagger](http://51.250.78.138:8080/swagger)

*   **Публичный Telegram-канал для алертов:** [https://t.me/o11y_sheet_analitik](https://t.me/o11y_sheet_analitik)

---
## Инструкция по воспроизведению алертов

Для демонстрации работы системы алертинга, пожалуйста, используйте UI для нагрузочного тестирования Locust.

Для выполнения условий обоих алертов(p99> 500ms и DB rps > 100) достаточно:
1.  Перейдите в **Locust UI** по ссылке выше.
2.  Запустите тест со следующими параметрами:
    *   **Number of users:** `400`
    *   **Spawn rate:** `400`
3.  Нагрузка будет идти на разные ручки.
4.  Очень быстро все показатели прервысят норму и сработают алерты.

---
## Infrastructure as Code (IaC)

Вся конфигурация системы описана в коде и применяется автоматически при запуске.

*   **Конфигурация Prometheus и правила алертов** находятся в директории [`./prometheus/`](./prometheus/).
*   **Конфигурация Grafana (источник данных и дашборды)** находится в директории [`./grafana/provisioning/`](./grafana/provisioning/). Дашборды и алерты создаются автоматически при старте контейнера.

---
## Профилирование

Вот ссылка на папку с видео https://drive.google.com/drive/folders/1K_uM5foS78VwYEEGWmkkdUcs5yiXfVuy?usp=sharing
Записыывал без звука, но думаю там все и без него понятно.

---
## Бонусные задания

*   **Swagger (№6):** Реализована интерактивная документация по API, доступная по [этой ссылке](http://51.250.78.138:8080/swagger).
*   **Трейсинг (№7):** Настроен сквозной трейсинг с помощью OpenTelemetry и Jaeger. Посмотреть трейсы можно в [Jaeger UI](http://51.250.78.138:16686/).
*   **Профилирование (№8):** С помощью инстумента clinic я проверл профелирование
*   **"Новая" БД (№9):** В качестве основной базы данных используется документо-ориентированная СУБД MongoDB.
*   **"Новый" язык (№10):** Сервис написан на TypeScript.(надеюсь успел)
